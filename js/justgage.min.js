/**
 * JustGage - this is work-in-progress, unreleased, unofficial code, so it might not work top-notch :)
 * Check http://www.justgage.com for official releases
 * Licensed under MIT.
 * @author Bojan Djuricic  (@Toorshia)
 *
**/
function getColor(e,t,i,n,a){var o,l,r,c,m,u,g,f,s,d,h,p,x,v,n=n||a.length>0;if(a.length>0)for(var b=0;a.length>b;b++)if(e>a[b].lo&&a[b].hi>=e)return a[b].color;if(o=i.length,1===o)return i[0];l=n?1/o:1/(o-1),r=[];for(var b=0;i.length>b;b++)c=n?l*(b+1):l*b,m=parseInt(cutHex(i[b]).substring(0,2),16),u=parseInt(cutHex(i[b]).substring(2,4),16),g=parseInt(cutHex(i[b]).substring(4,6),16),r[b]={pct:c,color:{r:m,g:u,b:g}};if(0===t)return"rgb("+[r[0].color.r,r[0].color.g,r[0].color.b].join(",")+")";for(var y=0;r.length>y;y++)if(r[y].pct>=t)return n?"rgb("+[r[y].color.r,r[y].color.g,r[y].color.b].join(",")+")":(f=r[y-1],s=r[y],d=s.pct-f.pct,h=(t-f.pct)/d,p=1-h,x=h,v={r:Math.floor(f.color.r*p+s.color.r*x),g:Math.floor(f.color.g*p+s.color.g*x),b:Math.floor(f.color.b*p+s.color.b*x)},"rgb("+[v.r,v.g,v.b].join(",")+")")}function setDy(e){(!ie||ie>9)&&(e.node.firstChild.attributes.dy.value=0)}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}function cutHex(e){return"#"==e.charAt(0)?e.substring(1,7):e}function humanFriendlyNumber(e,t){var i,n,a,o;for(i=Math.pow,n=i(10,t),a=7;a;)o=i(10,3*a--),e>=o&&(e=Math.round(e*n/o)/n+"KMGTPE"[a]);return e}function getStyle(e,t){var i="";return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,"").getPropertyValue(t):e.currentStyle&&(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),i=e.currentStyle[t]),i}function onCreateElementNsReady(e){void 0!==document.createElementNS?e():setTimeout(function(){onCreateElementNsReady(e)},100)}JustGage=function(e){var t=this;t.config={id:e.id,parentNode:e.parentNode?e.parentNode:null,width:e.width?e.width:null,height:e.height?e.height:null,title:e.title?e.title:"",titleFontColor:e.titleFontColor?e.titleFontColor:"#999999",value:e.value?e.value:0,valueFontColor:e.valueFontColor?e.valueFontColor:"#010101",symbol:e.symbol?e.symbol:"",min:void 0!==e.min?parseFloat(e.min):0,max:void 0!==e.max?parseFloat(e.max):100,humanFriendlyDecimal:e.humanFriendlyDecimal?e.humanFriendlyDecimal:0,textRenderer:e.textRenderer?e.textRenderer:null,gaugeWidthScale:e.gaugeWidthScale?e.gaugeWidthScale:1,gaugeColor:e.gaugeColor?e.gaugeColor:"#edebeb",label:e.label?e.label:"",labelFontColor:e.labelFontColor?e.labelFontColor:"#b3b3b3",shadowOpacity:e.shadowOpacity?e.shadowOpacity:.2,shadowSize:e.shadowSize?e.shadowSize:5,shadowVerticalOffset:e.shadowVerticalOffset?e.shadowVerticalOffset:3,levelColors:e.levelColors?e.levelColors:["#a9d70b","#f9c802","#ff0000"],startAnimationTime:e.startAnimationTime?e.startAnimationTime:700,startAnimationType:e.startAnimationType?e.startAnimationType:">",refreshAnimationTime:e.refreshAnimationTime?e.refreshAnimationTime:700,refreshAnimationType:e.refreshAnimationType?e.refreshAnimationType:">",donutStartAngle:e.donutStartAngle?e.donutStartAngle:90,valueMinFontSize:e.valueMinFontSize||16,titleMinFontSize:e.titleMinFontSize||10,labelMinFontSize:e.labelMinFontSize||10,minLabelMinFontSize:e.minLabelMinFontSize||10,maxLabelMinFontSize:e.maxLabelMinFontSize||10,hideValue:e.hideValue?e.hideValue:!1,hideMinMax:e.hideMinMax?e.hideMinMax:!1,hideInnerShadow:e.hideInnerShadow?e.hideInnerShadow:!1,humanFriendly:e.humanFriendly?e.humanFriendly:!1,noGradient:e.noGradient?e.noGradient:!1,donut:e.donut?e.donut:!1,relativeGaugeSize:e.relativeGaugeSize?e.relativeGaugeSize:!1,counter:e.counter?e.counter:!1,decimals:e.decimals?e.decimals:0,customSectors:e.customSectors?e.customSectors:[]};var i,n,a,o,l,r,c,m,u,g,f,s,d,h,p,x,v,b,y,S,F,M;t.config.value>t.config.max&&(t.config.value=t.config.max),t.config.value<t.config.min&&(t.config.value=t.config.min),t.originalValue=e.value,null!==t.config.id&&null!==document.getElementById(t.config.id)?t.canvas=Raphael(t.config.id,"100%","100%"):null!==t.config.parentNode&&(t.canvas=Raphael(t.config.parentNode,"100%","100%")),t.config.relativeGaugeSize===!0&&t.canvas.setViewBox(0,0,200,150,!0),t.config.relativeGaugeSize===!0?(i=200,n=150):null!==t.config.width&&null!==t.config.height?(i=t.config.width,n=t.config.height):null!==t.config.parentNode?(t.canvas.setViewBox(0,0,200,150,!0),i=200,n=150):(i=1*getStyle(document.getElementById(t.config.id),"width").slice(0,-2),n=1*getStyle(document.getElementById(t.config.id),"height").slice(0,-2)),t.config.donut===!0?(i>n?(o=n,a=o):n>i?(a=i,o=a,o>n&&(l=o/n,o/=l,a=o/l)):(a=i,o=a),r=(i-a)/2,c=(n-o)/2,m=o/8>10?o/10:10,u=r+a/2,g=c+o/11,f=o/6.4>16?o/5.4:18,s=r+a/2,d=""!==t.config.label?c+o/1.85:c+o/1.7,h=o/16>10?o/16:10,p=r+a/2,x=d+h,v=o/16>10?o/16:10,b=r+a/10+a/6.666666666666667*t.config.gaugeWidthScale/2,y=x,S=o/16>10?o/16:10,F=r+a-a/10-a/6.666666666666667*t.config.gaugeWidthScale/2,M=x):(i>n?(o=n,a=1.25*o,a>i&&(l=a/i,a/=l,o/=l)):n>i?(a=i,o=a/1.25,o>n&&(l=o/n,o/=l,a=o/l)):(a=i,o=.75*a),r=(i-a)/2,c=(n-o)/2,m=o/8>t.config.titleMinFontSize?o/10:t.config.titleMinFontSize,u=r+a/2,g=c+o/6.4,f=o/6.5>t.config.valueMinFontSize?o/6.5:t.config.valueMinFontSize,s=r+a/2,d=c+o/1.275,h=o/16>t.config.labelMinFontSize?o/16:t.config.labelMinFontSize,p=r+a/2,x=d+f/2+5,v=o/16>t.config.minLabelMinFontSize?o/16:t.config.minLabelMinFontSize,b=r+a/10+a/6.666666666666667*t.config.gaugeWidthScale/2,y=x,S=o/16>t.config.maxLabelMinFontSize?o/16:t.config.maxLabelMinFontSize,F=r+a-a/10-a/6.666666666666667*t.config.gaugeWidthScale/2,M=x),t.params={canvasW:i,canvasH:n,widgetW:a,widgetH:o,dx:r,dy:c,titleFontSize:m,titleX:u,titleY:g,valueFontSize:f,valueX:s,valueY:d,labelFontSize:h,labelX:p,labelY:x,minFontSize:v,minX:b,minY:y,maxFontSize:S,maxX:F,maxY:M},M=null,t.canvas.customAttributes.pki=function(e,t,i,n,a,o,l,r,c){var m,u,g,f,s,d,h,p,x,v;return c?(m=(1-2*(e-t)/(i-t))*Math.PI,u=n/2-n/7,g=u-n/6.666666666666667*r,f=n/2+o,s=a/1.95+l,d=n/2+o+u*Math.cos(m),h=a-(a-s)+0-u*Math.sin(m),p=n/2+o+g*Math.cos(m),x=a-(a-s)+0-g*Math.sin(m),v+="M"+(f-g)+","+s+" ",v+="L"+(f-u)+","+s+" ",e>(i-t)/2&&(v+="A"+u+","+u+" 0 0 1 "+(f+u)+","+s+" "),v+="A"+u+","+u+" 0 0 1 "+d+","+h+" ",v+="L"+p+","+x+" ",e>(i-t)/2&&(v+="A"+g+","+g+" 0 0 0 "+(f+g)+","+s+" "),v+="A"+g+","+g+" 0 0 0 "+(f-g)+","+s+" ",v+="Z ",{path:v}):(m=(1-(e-t)/(i-t))*Math.PI,u=n/2-n/10,g=u-n/6.666666666666667*r,f=n/2+o,s=a/1.25+l,d=n/2+o+u*Math.cos(m),h=a-(a-s)+0-u*Math.sin(m),p=n/2+o+g*Math.cos(m),x=a-(a-s)+0-g*Math.sin(m),v+="M"+(f-g)+","+s+" ",v+="L"+(f-u)+","+s+" ",v+="A"+u+","+u+" 0 0 1 "+d+","+h+" ",v+="L"+p+","+x+" ",v+="A"+g+","+g+" 0 0 0 "+(f-g)+","+s+" ",v+="Z ",{path:v})},t.gauge=t.canvas.path().attr({stroke:"none",fill:t.config.gaugeColor,pki:[t.config.max,t.config.min,t.config.max,t.params.widgetW,t.params.widgetH,t.params.dx,t.params.dy,t.config.gaugeWidthScale,t.config.donut]}),t.level=t.canvas.path().attr({stroke:"none",fill:getColor(t.config.value,(t.config.value-t.config.min)/(t.config.max-t.config.min),t.config.levelColors,t.config.noGradient,t.config.customSectors),pki:[t.config.min,t.config.min,t.config.max,t.params.widgetW,t.params.widgetH,t.params.dx,t.params.dy,t.config.gaugeWidthScale,t.config.donut]}),t.config.donut&&t.level.transform("r"+t.config.donutStartAngle+", "+(t.params.widgetW/2+t.params.dx)+", "+(t.params.widgetH/1.95+t.params.dy)),t.txtTitle=t.canvas.text(t.params.titleX,t.params.titleY,t.config.title),t.txtTitle.attr({"font-size":t.params.titleFontSize,"font-weight":"bold","font-family":"Arial",fill:t.config.titleFontColor,"fill-opacity":"1"}),setDy(t.txtTitle,t.params.titleFontSize,t.params.titleY),t.txtValue=t.canvas.text(t.params.valueX,t.params.valueY,0),t.txtValue.attr({"font-size":t.params.valueFontSize,"font-weight":"bold","font-family":"Arial",fill:t.config.valueFontColor,"fill-opacity":"0"}),setDy(t.txtValue,t.params.valueFontSize,t.params.valueY),t.txtLabel=t.canvas.text(t.params.labelX,t.params.labelY,t.config.label),t.txtLabel.attr({"font-size":t.params.labelFontSize,"font-weight":"normal","font-family":"Arial",fill:t.config.labelFontColor,"fill-opacity":"0"}),setDy(t.txtLabel,t.params.labelFontSize,t.params.labelY),t.txtMinimum=t.config.min,t.config.humanFriendly&&(t.txtMinimum=humanFriendlyNumber(t.config.min,t.config.humanFriendlyDecimal)),t.txtMin=t.canvas.text(t.params.minX,t.params.minY,t.txtMinimum),t.txtMin.attr({"font-size":t.params.minFontSize,"font-weight":"normal","font-family":"Arial",fill:t.config.labelFontColor,"fill-opacity":t.config.hideMinMax||t.config.donut?"0":"1"}),setDy(t.txtMin,t.params.minFontSize,t.params.minY),t.txtMaximum=t.config.max,t.config.humanFriendly&&(t.txtMaximum=humanFriendlyNumber(t.config.max,t.config.humanFriendlyDecimal)),t.txtMax=t.canvas.text(t.params.maxX,t.params.maxY,t.txtMaximum),t.txtMax.attr({"font-size":t.params.maxFontSize,"font-weight":"normal","font-family":"Arial",fill:t.config.labelFontColor,"fill-opacity":t.config.hideMinMax||t.config.donut?"0":"1"}),setDy(t.txtMax,t.params.maxFontSize,t.params.maxY);var w=t.canvas.canvas.childNodes[1],A="http://www.w3.org/2000/svg";9>ie?onCreateElementNsReady(function(){t.generateShadow(A,w)}):t.generateShadow(A,w),A=null,t.originalValue=t.config.textRenderer?t.config.textRenderer(t.originalValue):t.config.humanFriendly?humanFriendlyNumber(t.originalValue,t.config.humanFriendlyDecimal)+t.config.symbol:(1*t.originalValue).toFixed(t.config.decimals)+t.config.symbol,t.config.counter===!0?(eve.on("raphael.anim.frame."+t.level.id,function(){var e=t.level.attr("pki");t.config.textRenderer?t.txtValue.attr("text",t.config.textRenderer(Math.floor(e[0]))):t.config.humanFriendly?t.txtValue.attr("text",humanFriendlyNumber(Math.floor(e[0]),t.config.humanFriendlyDecimal)+t.config.symbol):t.txtValue.attr("text",(1*e[0]).toFixed(t.config.decimals)+t.config.symbol),setDy(t.txtValue,t.params.valueFontSize,t.params.valueY),e=null}),eve.on("raphael.anim.finish."+t.level.id,function(){t.txtValue.attr({text:t.originalValue}),setDy(t.txtValue,t.params.valueFontSize,t.params.valueY)})):eve.on("raphael.anim.start."+t.level.id,function(){t.txtValue.attr({text:t.originalValue}),setDy(t.txtValue,t.params.valueFontSize,t.params.valueY)}),t.level.animate({pki:[t.config.value,t.config.min,t.config.max,t.params.widgetW,t.params.widgetH,t.params.dx,t.params.dy,t.config.gaugeWidthScale,t.config.donut]},t.config.startAnimationTime,t.config.startAnimationType),t.txtValue.animate({"fill-opacity":t.config.hideValue?"0":"1"},t.config.startAnimationTime,t.config.startAnimationType),t.txtLabel.animate({"fill-opacity":"1"},t.config.startAnimationTime,t.config.startAnimationType)},JustGage.prototype.refresh=function(e,t){var i,n,a=this,t=t||null;null!==t&&(a.config.max=t,a.txtMaximum=a.config.max,a.config.humanFriendly&&(a.txtMaximum=humanFriendlyNumber(a.config.max,a.config.humanFriendlyDecimal)),a.txtMax.attr({text:a.txtMaximum}),setDy(a.txtMax,a.params.maxFontSize,a.params.maxY)),i=e,1*e>1*a.config.max&&(e=1*a.config.max),1*a.config.min>1*e&&(e=1*a.config.min),n=getColor(e,(e-a.config.min)/(a.config.max-a.config.min),a.config.levelColors,a.config.noGradient,a.config.customSectors),i=a.config.textRenderer?a.config.textRenderer(i):a.config.humanFriendly?humanFriendlyNumber(i,a.config.humanFriendlyDecimal)+a.config.symbol:(1*i).toFixed(a.config.decimals)+a.config.symbol,a.originalValue=i,a.config.value=1*e,a.config.counter||(a.txtValue.attr({text:i}),setDy(a.txtValue,a.params.valueFontSize,a.params.valueY)),a.level.animate({pki:[a.config.value,a.config.min,a.config.max,a.params.widgetW,a.params.widgetH,a.params.dx,a.params.dy,a.config.gaugeWidthScale,a.config.donut],fill:n},a.config.refreshAnimationTime,a.config.refreshAnimationType),t=null},JustGage.prototype.generateShadow=function(e,t){var i,n,a,o,l,r,c,m=this;i=document.createElementNS(e,"filter"),i.setAttribute("id","inner-shadow"),t.appendChild(i),n=document.createElementNS(e,"feOffset"),n.setAttribute("dx",0),n.setAttribute("dy",m.config.shadowVerticalOffset),i.appendChild(n),a=document.createElementNS(e,"feGaussianBlur"),a.setAttribute("result","offset-blur"),a.setAttribute("stdDeviation",m.config.shadowSize),i.appendChild(a),o=document.createElementNS(e,"feComposite"),o.setAttribute("operator","out"),o.setAttribute("in","SourceGraphic"),o.setAttribute("in2","offset-blur"),o.setAttribute("result","inverse"),i.appendChild(o),l=document.createElementNS(e,"feFlood"),l.setAttribute("flood-color","black"),l.setAttribute("flood-opacity",m.config.shadowOpacity),l.setAttribute("result","color"),i.appendChild(l),r=document.createElementNS(e,"feComposite"),r.setAttribute("operator","in"),r.setAttribute("in","color"),r.setAttribute("in2","inverse"),r.setAttribute("result","shadow"),i.appendChild(r),c=document.createElementNS(e,"feComposite"),c.setAttribute("operator","over"),c.setAttribute("in","shadow"),c.setAttribute("in2","SourceGraphic"),i.appendChild(c),m.config.hideInnerShadow||(m.canvas.canvas.childNodes[2].setAttribute("filter","url(#inner-shadow)"),m.canvas.canvas.childNodes[3].setAttribute("filter","url(#inner-shadow)")),c=null};var ie=function(){for(var e,t=3,i=document.createElement("div"),n=i.getElementsByTagName("i");i.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",n[0];);return t>4?t:e}();